# 设计模式



## 发布-订阅者模式

发布-订阅者模式。可以理解成发布者将订阅事件保存在缓存队列中，订阅者通过事件的监听、触发与移除触发相应的回调函数。

```javascript
class EventEmitter {
  // 存储事件缓存队列
  constructor() {
    this.events = {}
  }
  // 绑定事件
  on(event, callback) {
    if (!this.events[event]) {
      this.events[event] = [callback]
    } else {
      this.events[event].push(callback)
    }
  }
  // 事件触发
  emit(event) {
    this.events[event] && this.events[event].forEach(cb => cb())
  }
  // 事件的移除
  remove(event, callback) {
    if (this.events[event]) {
      this.events =  this.events[event].filter(cb => cb !== callback)
    }
  }
}
let em = new EventEmitter()
function foo() {
  console.log("Work!")
}
em.on("work", foo)
em.remove("work", foo)
em.emit("work")
```

