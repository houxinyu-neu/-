# 存储管理之内存分配与回收

## 内存分配的过程

1. 单一连续分配

   将内存分成系统区和用户区

2. 固定分区分配
   + 划分内存空间成若干分区，将分区提供给进程

3. 动态分区分配

   + 按进程需要动态分配

   + 动态分区空闲表数据结构：

     ![image-20200503120654793](D:/Typora/upload/image-20200503120654793.png)

   + 动态分区空闲链数据结构：

     ![image-20200503120802185](D:/Typora/upload/image-20200503120802185.png)

4. 动态分区分配算法

   + 首次适应算法（FF）

     + 采取空闲链表的数据结构，顺序查找空闲区。

   + 最佳适应算法（BF）

     + 将空闲区链表按容量大小排序，遍历时寻找最佳空闲区

       ![image-20200503121515790](D:/Typora/upload/image-20200503121515790.png)

   + 快速适应算法（QF）

     + 要求多个空闲链表，保存不同容量

       ![image-20200503121556654](D:/Typora/upload/image-20200503121556654.png)

## 内存回收的过程

1. 情况一：

   <img src="D:/Typora/upload/image-20200503121733607.png" alt="image-20200503121733607" style="zoom:50%;" />

   只需增大空闲区的容量即可。

2. 情况二：

   <img src="D:/Typora/upload/image-20200503121812302.png" alt="image-20200503121812302" style="zoom:50%;" />

   空闲区和回收区合并后使用回收区地址。

3. 情况三：

   <img src="D:/Typora/upload/image-20200503121904045.png" alt="image-20200503121904045" style="zoom:50%;" />

   合并后使用空闲区1的地址。

4. 情况四：

   <img src="D:/Typora/upload/image-20200503121943526.png" alt="image-20200503121943526" style="zoom:50%;" />

   为回收区创建空闲节点，插入到空闲链表中。