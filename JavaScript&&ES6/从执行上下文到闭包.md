# 从执行上下文看闭包

```javascript
function foo(){
    let abc = 1
    function a(){
        console.log(abc)
    }
    return a 
}
foo()()//1
```

作用域：`Js`中只有函数的`{}`可以规定作用域。

函数外层作用域被销毁后仍能访问到函数内部的变量。

## 理解

+ 执行上下文：内存独立的堆栈。

+ 作用域链：只有函数`{}`才能创建作用域，可从内到外查询作用域链的变量。
+ 变量对象`VO`：变量的声明，不能直接访问到。
+ 活动对象`AO`：`arguments`、`length`、`callee`

## 过程

1. 进入全局执行上下文
2. `foo()`执行。
3. 创建执行环境，初始化作用域链，使用`this`、`arguments`初始化活动对象`AO`。
4. + 当`return`销毁执行环境
   + 有其他调用，重复执行3
   + 返回函数，继续初始化作用域链。

