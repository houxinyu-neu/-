# 数组篇

## 前言

几乎所有的编程语言都原生支持数组类型，数组也成为了最简单的内存数据结构。

`JavaScript`中也有着数组的类型，但与其他语言不同的，`JavaScipt`中的数组是一种弱类型，也就是说不同类型的数组依旧可以存储在同一数组中。

https://juejin.im/entry/59ae664d518825244d207196

## 数组常用`API`

1. 声明数组

   + **一维数组：**通过`Array`构造函数进行数组初始化，或者直接使用`[]`进行声明。

     ```javascript
     let arr = new Array(m)	//初始化一个m个元素的数组
     let arr = []			//初始化数组
     ```

   + **二维数组：**通过`Array.from(new Array(),()=>new Array())`初始化二维数组，或者直接使用`[[]]`进行声明。

     ```javascript
     let arr = [[1,2,3],[4,5,6],[7,8,9]]	//初始化二维数组
     let arr = Array.from(new Array(3),()=>new Array(3))	//初始化3*3二维数组
     ```

2. 检测方法

   + 通过`instance of`进行数组检测
   + 通过`Array.isArray()`
   + 通过`Object.prototype.toString.call()`

   ```javascript
   let arr = []
   a instanceof Array //true
   Array.isArray(a)	//true
   Object.prototype.toString.call(a)	//"[object Array]"
   ```

3. 转换方法

`toString()`,`toLocaleString()`,`valueOf()`和`join()`

+ `toString()`/`toLocaleString()`方法将返回数组中每个值以字符串形式拼接而成的逗号分隔的字符串。

  ```javascipt
  let arr = [1,2,"2","ss",[1,2],[1,2,[5]]]
  console.log(arr.toString())  //1,2,2,ss,1,2,1,2,5
  ```

+ `join()`接受一个参数，将数组的**每一项**按该参数进行分隔。

  ```javascript
  let arr = [1,2,3,4,5]
  let arr2 = [1,2,[1,1[1]]]
  console.log(arr2.join("||")) //1||2||1,1,1
  console.log(arr.join(","))  //1,2,3,4,6
  console.log(arr.join("||")) //1||2||3||4||5
  ```

4. 栈方法、队列方法、反转方法、排序方法

   **以上四种方法均会改变原数组**

+ 栈方法`push`和`pop`，其中`push()`返回执行后数组的长度、`pop()`方法返回所得到的元素。

+ 队列方法`shift()`和`unshift()`，其中`shift()`返回数组长度、`unshift()`返回出队列的元素。

```javascript
let arr = []
arr.push(1,5)	//2	返回数组长度
arr.pop()		//5
arr = []		
arr.shift(1,6)	//2
arr.unshift()	//1
```

+ 反转方法`reverse()`
+ 排序方法`sort()`

```javascript
let arr = [1,3,2,5,4]
arr.sort()
arr 	//[1,2,3,4,5]
arr = [1,3,2,5,4]
arr.reverse()
arr		//[4,5,2,3,1]
```

5. 操作方法

   + `concat()`可基于原数组创建新的数组，**但不会对原数组产生改变。**
   + `slice()`方法可用于截取数组中元素，**同样不会对原数组产生改变。**
   + `splice()`方法可动态向数组中添加或是删除元素，**将改变原数组。**

   ```javascript
   let arr = [1,2,3]
   arr.concat(5)	//[1,2,3,5]
   arr				//[1,2,3]
   arr.slice(0,1)	//1
   arr				//[1,2,3]
   arr.splice(0,1)	//1
   arr				//[2,3]
   ```

6. 位置方法

   + `indexOf()`用于从前向后找元素，并返回下标。
   + `lastIndexOf()`用于从后向前找元素，并返回下标。

   ```javascript
   let arr = [1,2,3,4,5,6,4,2,3]
   arr.indexOf(4)		//3
   arr.lastIndexOf(4)	//6
   ```

7. 迭代方法

   **对数组存在5个迭代方法，均接受三个参数，分别为`(item,index,arr)`**

   + **判断方法：**`every()`与`some()`。返回值为`true`或`false`。

   ```javascript
   let arr = [1, 2, 3]
   arr.every((item, index, arr) => {
     return item > 2
   })					// false
   arr.every((item, index, arr) => {
     return item > 2
   })					// true
   ```

   + **过滤方法：**`filter()`。返回满足条件的数组元素。

   ```javascript
   let arr = [1,2,3,4]
   arr.filter((item.index,arr) => {
   	return item > 2
   })					// [3,4]
   ```

   + **遍历方法：**`map()`和`forEach()`。

   ```javascript
   let arr = [1,2,3]
   arr.map((item,index,arr)=>{
   	return item * 2
   })				//[2,4,6]
   arr.forEach()	//与for循环一致。
   ```

8. 缩小方法

   **对数组存在缩小方法，分别接受三个参数`(prev,curr,index,arr)`**

   + `reduce()`

   ```javascript
   //数组求和
   let arr = [1,2,3]
   arr.reduce((prev,curr,index,arr)=>{
       return prev + curr	
   })				//6
   ```

## 基础练习

1. 数组扁平化

   > 将数组`arr=[1,2,3,[4,5],[8,[10]]]`扁平化处理成为`arr=[1,2,3,4,5,8,10]`

   * **第一种：**使用`toString()`转换成字符串后，使用`split()`进行字符串分割，最后`map()`将字符串转换成数字。

   ```javascript
   function flatten(arr) {
     console.log(arr.toString().split(",").map(item => Number(item)))
   }
   ```

   + **第二种：**对数组中每一项进行遍历，用`Array.isArray()`进行判断，如果仍为数组，进行迭代处理，否则`push`进入结果。

   ```javascript
   function flatten(arr) {
     let res = []
     arr.forEach(item => {
       Array.isArray(item) ? res = res.concat(flatten(item)) : res.push(item)
     })
     return res
   }
   ```

   - **第三种：**将数组每一项使用`join()`处理，然后与第一种相似。

   ```javascript
   function flatten(arr) {
    	return arr.join(",").split(",").map(item => Number(item))
   }
   ```

   + **第四种：**使用`ES6`的扩展运算符`[...]`

     对于扩展运算符，可以对数组进行一次扁平化处理。

   ```javascript
   //先看例子
   let arr = [1,[2],[3,[5]]]
   [].concat(...arr)//[1,2,3,[5]]
   
   function flatten(arr) {
     while (arr.some(item => Array.isArray(item))) {
       arr = [].concat(...arr)
     }
     return arr
   }
   ```

2. 数组去重

   > 将数组`arr=[1,2,1,5,2,6]`去重处理得到`arr=[1,2,5,6]`

   

3. 数组中最大值

   > 求数组中最大值

   

## `leetcode`练习

